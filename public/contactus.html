<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="dark_styles.css" rel="stylesheet">
    <link href="contactus.css" rel="stylesheet">
    <title>contact us</title>

    <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-storage.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-firestore.js"></script>

</head>
<body class="full-height-grow">
    <div class="container">
        <header class="main-header">
            <a href="/" class="brand-logo-dark">
                <img src="logo_files/dark_bg_full.png" width="280px">
            </a>
        </header>
    <section class="fb-main">
        <div style="font-size: 2rem; color: #ed8e79;">raise complaints or leave feedback!</div>
        <form class="form-entry" onsubmit="event.preventDefault();return false;">
            <div class="input-group">
                <label>email id:</label>
                <input type="email" id="loginEmail" style="color:#011F28;">                    
            </div>
            <div class="input-group">
                <label>feedback/complaint</label>
                <input type="text" id="fb" style="color: #011F28;">
            </div>
            <div class="btn-align">
                <button class="btn" onclick="submitIn();">submit</button>
            </div>
        </form>
    </section>
    </div>
    <script>

    var firebaseConfig = {
    apiKey: "AIzaSyB3joK7piWfPY72fuahSjMaGBc93iVDj_U",
    authDomain: "homes-2a852.firebaseapp.com",
    projectId: "homes-2a852",
    storageBucket: "homes-2a852.appspot.com",
    databaseURL: "https://homes-2a852-default-rtdb.asia-southeast1.firebasedatabase.app",
    messagingSenderId: "955002264254",
    appId: "1:955002264254:web:affa022685ce5d39461cef"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);

  const auth = firebase.auth();

  let db = firebase.firestore();

  document.addEventListener("DOMContentLoaded", function() {
        email = document.getElementById('loginEmail');
        feedback = document.getElementById('fb');
  })
        
    function submitIn(){
            if(isEmpty(email.value)||isEmpty(feedback.value))
                alert("Please enter valid data.");
            else{
                db.collection("Feedback").add({
                    Email : email.value,
                    Complaint : feedback.value
                }).then(function(){
                    alert("Thank you for your input, we will get back to you shortly!");
                    window.location.href = "http://localhost:5000/catalog.html"
                })
            }
        }    
    function isEmpty(value) {
            if (value == "" || typeof value == 'undefined') 
                return true;
            return false;
        }
        
    </script>
</body>
</html>